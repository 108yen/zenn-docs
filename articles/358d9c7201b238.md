---
title: "changesetsã‚’ä½¿ã£ã¦Webã‚µã‚¤ãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚’è‡ªå‹•åŒ–ã™ã‚‹"
emoji: "ğŸŠ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["githubactions", "github", "changesets"]
published: true
---

# ã¯ã˜ã‚ã«

Web ã‚µã‚¤ãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã«[changesets](https://github.com/changesets/changesets)ã‚’å°å…¥ã—ã¦ã¿ãŸã¨ã“ã‚ã€ã‚ã¡ã‚ƒã‚ã¡ã‚ƒä¾¿åˆ©ã§ã—ãŸã€‚ãŸã ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒã‚ã‹ã‚Šã«ãã‹ã£ãŸã®ã§ã€ä½¿ã„æ–¹ã‚„ã¤ã¾ã£ãŸç‚¹ãªã©æ›¸ã„ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚
[changesets](https://github.com/changesets/changesets)ã«ã¯`npm`ã¸ã®å…¬é–‹æ©Ÿèƒ½ãªã©ã‚‚ã‚ã‚Šã€[Chakra UI](https://v2.chakra-ui.com/getting-started)ã€[Astro](https://astro.build/)ã€[Emotion](https://emotion.sh/docs/introduction)ãªã©åã ãŸã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¡ãªã¿ã«[Yamada UI](https://yamada-ui.com/ja/getting-started)ã§ã‚‚ä½¿ã£ã¦ã„ã¾ã™ã€‚ä»Šå›ã¯`npm`ã¸ã®å…¬é–‹æ©Ÿèƒ½ã§ã¯ãªãã€Webã‚µã‚¤ãƒˆãªã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚’ã™ã‚‹ã“ã¨ã«ç„¦ç‚¹ã‚’å½“ã¦ãŸã„ã¨æ€ã„ã¾ã™ã€‚

ã‚ˆãæ¯”è¼ƒã•ã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã§[semantic-release](https://semantic-release.gitbook.io/semantic-release)ã¨ã„ã†ã‚‚ã®ã‚‚ã‚ã‚‹ã¿ãŸã„ã§ã™ã€‚ã“ã¡ã‚‰ã¯ã‚³ãƒŸãƒƒãƒˆã”ã¨ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä¸ŠãŒã£ã¦ã„ãã‚ˆã†ã§ã€è‡ªåˆ†ã¯é©å½“ã«ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã“ã¨ã‚‚å¤šã„ãŸã‚ã€ã‚ˆã‚ŠæŸ”è»Ÿã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æ“ä½œãŒã§ãã‚‹[changesets](https://github.com/changesets/changesets)ã®ã»ã†ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚

# [changesets](https://github.com/changesets/changesets)ã¨ã¯

[changesets](https://github.com/changesets/changesets)ã¯[ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°](https://semver.org/lang/ja/)ã«åŸºã¥ã„ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚’åŠ¹ç‡åŒ–ã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚å¥½ããªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å¤‰æ›´ã®ãƒ­ã‚°ã‚’æ›¸ãè¾¼ã‚€ã“ã¨ãŒã§ãã€ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã®ä½œæˆãªã©ã‚‚ GitHub Action è¨­å®šã™ã‚Œã°è‡ªå‹•ã§ã‚„ã£ã¦ãã‚Œã‚‹ã®ã§ã‚ã£ã¡ã‚ƒä¾¿åˆ©ã§ã™ã€‚

ã–ã£ãã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚

- å¤‰æ›´ãƒ­ã‚°ã®ç®¡ç†
  - ã©ã®ãƒ¬ãƒ™ãƒ«ï¼ˆMajor, Minor, Patchï¼‰ã®å¤‰æ›´ã«ã™ã‚‹ã‹ã‚’éƒ½åº¦é¸æŠå¯èƒ½
  - ã‚³ãƒŸãƒƒãƒˆã‚„ PR ã¨ã®ç´ã¥ã‘ã‚‚ã—ã¦ãã‚Œã‚‹

- ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã®è‡ªå‹•ä½œæˆ
  - ã‚³ãƒãƒ³ãƒ‰ã§ã®ä½œæˆã‚‚å¯èƒ½
  - GitHub Action ã‚‚ã‚ã‚Šã€ãƒªãƒªãƒ¼ã‚¹ã® PR ã‚’è‡ªå‹•ã§ã¤ãã£ã¦ãã‚Œã‚‹
  - PRã€ã‚³ãƒŸãƒƒãƒˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç´ã¥ã‘ã‚‚ã‚„ã£ã¦ãã‚Œã‚‹

ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã¯ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚

https://github.com/108yen/changeset-zenn/blob/main/CHANGELOG.md

PRã¯ã“ã‚“ãªæ„Ÿã˜ã§ä½œã£ã¦ãã‚Œã¾ã™ã€‚

https://github.com/108yen/changeset-zenn/pull/2
![pr sample](/images/358d9c7201b238/pr-sample.png)

# æº–å‚™

å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã“ã¡ã‚‰ã«ãªã‚Šã¾ã™ã€‚

:::details intro-to-using-changesets.md
https://github.com/changesets/changesets/blob/main/docs/intro-to-using-changesets.md
:::

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨åˆæœŸåŒ–

cli ãƒ„ãƒ¼ãƒ«ã¯`@changesets/cli`ã«å…¥ã£ã¦ã„ã‚‹ã®ã§ã€ã“ã‚Œã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã ã¨ãã®ã¾ã¾ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã¾ã™ãŒã€`devDependencies`ã®æ–¹ã«å…¥ã‚Œã‚Œã°ã„ã„ã¨æ€ã„ã¾ã™ã€‚

```shell
npm install --save-dev @changesets/cli
```

cli ãƒ„ãƒ¼ãƒ«ã‚’å…¥ã‚ŒãŸã‚‰ã€ã¾ãšåˆæœŸåŒ–ã—ã¾ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã«`.changeset`ãƒ•ã‚©ãƒ«ãƒ€ãŒä½œæˆã•ã‚Œã¾ã™ã€‚

```shell
npx changeset init
```

## `package.json`ã®è¨­å®š

:::details versioning-apps.md
https://github.com/changesets/changesets/blob/main/docs/versioning-apps.md
:::

[changesets](https://github.com/changesets/changesets)ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã™ã‚‹ãŸã‚ã«`package.json`å†…ã«æœ€ä½é™ã€ä»¥ä¸‹ã®3é …ç›®ãŒå«ã¾ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚é€†ã«ã€ã“ã®3é …ç›®ãŒå«ã¾ã‚Œã‚‹`package.json`ã•ãˆä½œæˆã™ã‚Œã°ã€ã©ã‚“ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†å¯èƒ½ãªã‚ˆã†ã§ã™ã€‚

```json
{
  "name": "package",
  "version": "1.0.0",
  "private": true
}
```

- name: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã‚’æŒ‡å®šã—ã¾ã™ã€‚
- version: [changesets](https://github.com/changesets/changesets)ã¯`version`ã®å€¤ã‚’å…ƒã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚ã’ã¦ã„ãã¾ã™ã€‚`o.o.o`ã‹ã‚‰å§‹ã‚ãŸã„å ´åˆã¯ã€ã“ã“ã‚’æ›¸ãæ›ãˆã‚‹ã¨ãã“ã‹ã‚‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¸Šã’ã‚Œã¾ã™ã€‚
- private: `private`ã¯`false`ã®å ´åˆã€`npm`ãªã©ã«å…¬é–‹ã™ã‚‹ãŸã‚ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒèµ°ã‚Šã¾ã™ã€‚ä»Šå›ã¯å…¬é–‹ã—ãªã„ã®ã§ã€`true`ã«ã—ã¾ã™ã€‚

## `config.json`ã®è¨­å®š

`npx changeset init`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€`.changeset/config.json`ãŒä½œæˆã•ã‚Œã¾ã™ã€‚
ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’`npm`ãªã©ã«å…¬é–‹ã—ãªã„å ´åˆã¯ã€ä»¥ä¸‹ã®è¨­å®šã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```json:.changeset/config.json
{
  ...
  "privatePackages": {
    "version": true,
    "tag": true
  }
}
```

# ä½¿ã„æ–¹

[changesets](https://github.com/changesets/changesets)ã®ã‚³ãƒãƒ³ãƒ‰ã§ã€å¤‰æ›´ã®è¨˜éŒ²ãŒè¨˜è¼‰ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã€ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã‚ã¦ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒŸãƒƒãƒˆãŠã‚ˆã³ãã‚ŒãŒå«ã¾ã‚Œã‚‹PRã¨åˆã‚ã›ã¦ç®¡ç†ã§ãã¾ã™ã€‚
è¨˜éŒ²ã•ã‚ŒãŸå¤‰æ›´ã‚’å…ƒã«ã€`CHANGELOG.md`ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’åãå‡ºã™ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

## å¤‰æ›´ã‚’è¨˜éŒ²ã™ã‚‹

å¤‰æ›´ã‚’æ›¸ãè¾¼ã‚€å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```shell
npx changeset
```

å®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã©ã®ãƒ¬ãƒ™ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³å¤‰æ›´ã‚’ã—ãŸã®ã‹èã‹ã‚Œã¾ã™ã€‚

```shell
ğŸ¦‹  What kind of change is this for changeset-zenn? (current version is 0.1.0) â€¦
â¯ patch
  minor
  major
```

é¸æŠã™ã‚‹ã¨ã€å¤‰æ›´å†…å®¹ã‚’èã‹ã‚Œã‚‹ã®ã§ã€å…¥åŠ›ã—ã¾ã™ã€‚

```shell
ğŸ¦‹  What kind of change is this for changeset-zenn? (current version is 0.1.0) Â· patch
ğŸ¦‹  Please enter a summary for this change (this will be in the changelogs).
ğŸ¦‹    (submit empty line to open external editor)
ğŸ¦‹  Summary â€º
```

å…¥åŠ›ã—ã¦`Enter`ã‚’æŠ¼ä¸‹ã™ã‚‹ã¨ã€ã“ã‚Œã§ã„ã„ã§ã™ã‹ï¼Ÿã¨èã‹ã‚Œã‚‹ã®ã§å†åº¦`Enter`ã‚’æŠ¼ä¸‹ã—ã¦ã€å¤‰æ›´ã®è¨˜éŒ²ãŒè¨˜è¼‰ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ç”Ÿæˆã¯å®Œäº†ã«ãªã‚Šã¾ã™ã€‚

```shell
ğŸ¦‹  === Summary of changesets ===
ğŸ¦‹  patch:  changeset-zenn
ğŸ¦‹
ğŸ¦‹  Is this your desired changeset? (Y/n) â€º true
```

å®Œäº†ã™ã‚‹ã¨ã€`.changeset`ãƒ•ã‚©ãƒ«ãƒ€é…ä¸‹ã«å…ˆã»ã©ã®å¤‰æ›´ãŒè¨˜éŒ²ã•ã‚ŒãŸmdãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã™ã€‚å¤‰æ›´ã®è¨˜éŒ²ã‚’è¿½åŠ ã™ã‚‹ãŸã³ã«ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¢—ãˆã¦ã„ãã¾ã™ã€‚
mdãƒ•ã‚¡ã‚¤ãƒ«ãªã®ã§ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³å¤‰æ›´ã®ãƒ¬ãƒ™ãƒ«ã®å¤‰æ›´ã‚„ã€å¤‰æ›´å†…å®¹ã®æ–‡ç« ã‚’æ›´æ–°ã—ãŸã„å ´åˆã¯ç›´æ¥å¤‰æ›´å¯èƒ½ã§ã™ã€‚
ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒŸãƒƒãƒˆã«å«ã‚ã€å¤‰æ›´ã®è¨˜éŒ²ã¯å®Œäº†ã«ãªã‚Šã¾ã™ã€‚

![changeset folder](/images/358d9c7201b238/changeset-folder.png)

## `CHANGELOG.md`ã®ä½œæˆ

ãƒªãƒªãƒ¼ã‚¹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã€æºœã¾ã£ãŸå¤‰æ›´ã®è¨˜éŒ²ã‚’å…ƒã«`CHANGELOG.md`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```shell
npx changeset version
```

å®Ÿè¡Œã™ã‚‹ã¨ã€ä»Šã¾ã§æºœã¾ã£ã¦ã„ãŸ`.changeset`é…ä¸‹ã®mdãƒ•ã‚¡ã‚¤ãƒ«ãŒå‰Šé™¤ã•ã‚Œã€`CHANGELOG.md`ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ›´æ–°ã•ã‚Œã¾ã™ã€‚`Minor`ã®å¤‰æ›´ã¨`Patch`ã®å¤‰æ›´äºŒã¤å®Ÿæ–½ã—ãŸå ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯`0.1.0`ã€€â†’ `0.2.0`ã«å¤‰æ›´ã«ãªã‚Šã¾ã—ãŸã€‚`package.json`å†…ã®`version`ã®é …ç›®ã‚‚ä¸€ç·’ã«å¤‰æ›´ã•ã‚Œã¾ã™ã€‚

```md:CHANGELOG.md
# changeset-zenn

## 0.2.0

### Minor Changes

- 8ccbd1d: Test changelog3.

### Patch Changes

- 0903189: Test changelog2.
- 52036f3: Test changelog.
```

## GitHub Action

[changesets](https://github.com/changesets/changesets)ãŒã€[Github Action](https://github.com/changesets/action)ã‚‚ç”¨æ„ã—ã¦ãã‚Œã¦ãŠã‚Šã€ã“ã‚ŒãŒã™ã”ãä¾¿åˆ©ãªã®ã§[changesets](https://github.com/changesets/changesets)ã‚’ä½¿ã†ã®ã§ã‚ã‚Œã°ã€çµ¶å¯¾ä½¿ã†ã¹ãã§ã™ã€‚
`npx changeset version`ã‚’å®Ÿè¡Œã—ã€ãã®å¤‰æ›´ã‚’å«ã‚ã‚³ãƒŸãƒƒãƒˆã—ãŸä¸Šã§ã€PRã®ä½œæˆã¾ã§è‡ªå‹•ã§ã—ã¦ãã‚Œã¾ã™ã€‚è¿½åŠ ã®å¤‰æ›´ãŒpushã•ã‚Œã‚‹ã¨ã€ãã‚Œã‚‚å–ã‚Šè¾¼ã‚“ã§æ—¢å­˜ã®PRã‚’ä¸Šæ›¸ãã—ã¦ãã‚Œã¾ã™ã€‚

### è¨­å®šæ–¹æ³•

ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§`main`ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹ã”ã¨ã«ã€å¤‰æ›´ãŒè¨˜éŒ²ã•ã‚ŒãŸmdãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã—ã€ã‚ã‚Œã°ãã‚Œã‚’PRã«åæ˜ ã—ã¦ãã‚Œã¾ã™ã€‚

::::message

ã‚³ãƒŸãƒƒãƒˆã¨PRã®ä½œæˆã‚’è¡Œã†ã®ã§ã€ãã®æ¨©é™ã‚’`permissions`ã§ä»˜ä¸ã—ã¦ãã ã•ã„ã€‚
GitHubãƒªãƒã‚¸ãƒˆãƒªã®è¨­å®šã‚‚å¤‰æ›´ãŒå¿…è¦ã§ã™ã€‚

:::details ãƒªãƒã‚¸ãƒˆãƒªã®è¨­å®šå¤‰æ›´

Settingsã€€â†’ Actions â†’ General â†’ Workflow permissionsã®`Allow GitHub Actions to create and approve pull requests`ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚
èª¬æ˜ã«è¨˜è¼‰ã®é€šã‚Šã€GitHub Actionsã«PRã®ä½œæˆã‚’è¨±å¯ã™ã‚‹è¨­å®šã«ãªã‚Šã¾ã™ã€‚

![github setting](/images/358d9c7201b238/github-setting.png)

:::

::::

```yml:.github/workflows/release.yml
name: Release

on:
  push:
    branches:
      - main

concurrency: ${{ github.workflow }}-${{ github.ref }}

jobs:
  release:
    name: Release

    permissions:
      pull-requests: write
      contents: write

    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repo
        uses: actions/checkout@v4

      - name: Setup Node.js 20
        uses: actions/setup-node@v4
        with:
          node-version: 20

      - name: Install Dependencies
        run: npm install

      - name: Create Release Pull Request
        uses: changesets/action@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

ã“ã†ã„ã†æ„Ÿã˜ã®PRã‚’ä½œæˆã—ã¦ãã‚Œã¾ã™ã€‚
ãƒªãƒªãƒ¼ã‚¹ã®æ™‚ã¯ã“ã®PRã‚’ãƒãƒ¼ã‚¸ã™ã‚‹ã ã‘ã§è‰¯ããªã‚Šã€æ‰‹å‹•ã§`npx changeset version`ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ã¯ãªããªã‚Šã¾ã™ã€‚

https://github.com/108yen/changeset-zenn/pull/1

### PRã‚’ç´ã¥ã‘ã‚‹

å…ˆã»ã©ã®PRã§ä½œæˆã•ã‚ŒãŸã‚‚ã®ã¯ã€ã©ã®ã‚³ãƒŸãƒƒãƒˆã«ç´ã¥ã„ã¦ã„ã‚‹ã‹ã¯è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ãŒã€ã©ã®PRã‹ã€èª°ãŒã‚„ã£ãŸã‹ã¯å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

![no pr contain](/images/358d9c7201b238/pr-note-sample.png)

ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã®æ–‡ç« ã‚’å¤‰æ›´ã™ã‚‹ã«ã¯ã€`.changeset/config.json`ã®`changelog`ã®è¨­å®šã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ã€‚ï¼ˆè©³ç´°ã¯[ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹](#ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹)ï¼‰
PRã‚’ç´ã¥ã‘ã‚Œã‚‹ã‚‚ã®ã¯ã™ã§ã«æä¾›ã•ã‚Œã¦ã„ã‚‹ã®ã§ãã‚Œã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

https://github.com/changesets/changesets/blob/main/docs/config-file-options.md#changelog-false-or-a-path

`@changesets/changelog-github`ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```shell
npm install --save-dev @changesets/changelog-github
```

`.changeset/config.json`ã‚’å¤‰æ›´ã—ã¦ã€ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã®ç”Ÿæˆã«`@changesets/changelog-github`ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚`changelog`ã®é …ç›®ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚ï¼’ã¤ç›®ã®é …ç›®ã®`repo`ã«ã¯ã€è‡ªèº«ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã‚’è¨˜è¼‰ã—ã¦ãã ã•ã„ã€‚

```diff json:.changeset/config.json
{
  ...
-  "changelog": "@changesets/cli/changelog",
+  "changelog": [
+    "@changesets/changelog-github",
+    { "repo": "108yen/changeset-zenn" }
+  ],
  ...
}
```

ã“ã‚Œã§è¨­å®šã¯å®Œäº†ã§ã‚ã¨ã¯åŒã˜ã‚ˆã†ã«åˆ©ç”¨ã™ã‚Œã°ã€è‡ªå‹•ä½œæˆã—ã¦ãã‚Œã‚‹PRã®å†…å®¹ã«ã€å¤‰æ›´ãŒå«ã¾ã‚Œã‚‹PRã‚„å¤‰æ›´ã‚’å®Ÿæ–½ã—ãŸäººãŒãƒªãƒ³ã‚¯ã•ã‚Œã¾ã™ã€‚

https://github.com/108yen/changeset-zenn/pull/2

![pr with links](/images/358d9c7201b238/pr-with-links-sample.png)

### ãƒªãƒªãƒ¼ã‚¹æ™‚ã«ä»–ã®å‡¦ç†ï¼ˆãƒ‡ãƒ–ãƒ­ã‚¤ãªã©ï¼‰ã‚’å®Ÿè¡Œã™ã‚‹

[changesets](https://github.com/changesets/changesets)ãŒä½œæˆã—ãŸPRã‚’ãƒãƒ¼ã‚¸ã™ã‚‹éš›ã«ã€ãƒ‡ãƒ—ãƒ­ã‚¤å‡¦ç†ã‚’èµ°ã‚‰ã›ãŸã„å ´åˆãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚
ä»¥ä¸‹ã®ã‚ˆã†ã«ã€åˆ¥ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’è¨­å®šã™ã‚Œã°å¯èƒ½ã§ã™ã€‚

ã“ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯ã€mainã‚’ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¨ã—ãŸPRãŒã‚¯ãƒ­ãƒ¼ã‚ºã•ã‚ŒãŸæ™‚ã«ãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œã¾ã™ã€‚åŠ ãˆã¦ã€ãã®PRãŒãƒãƒ¼ã‚¸ã•ã‚Œã¦ãŠã‚Šã€`changeset-release`ã§å§‹ã¾ã‚‹åå‰ã®ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰ã®PRã§ã‚ã‚Œã°ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¸ãƒ§ãƒ–ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«æ¡ä»¶æ–‡ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚
[changesets](https://github.com/changesets/changesets)ã¯`changeset-release/[ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ–ãƒ©ãƒ³ãƒ]`ã¨ã„ã†åç§°ã§ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆã—ã€ãã“ã‹ã‚‰ãƒªãƒªãƒ¼ã‚¹ã®PRã‚’ä½œæˆã™ã‚‹ã®ã§ã€ã“ã‚Œã§ãƒªãƒªãƒ¼ã‚¹ã®PRãŒãƒãƒ¼ã‚¸ã•ã‚ŒãŸæ™‚ã®ã¿ã«å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚


```yml:.github/workflows/deploy.yml
name: Deploy

on:
  pull_request_target:
    types:
      - closed
    branches:
      - main

concurrency: ${{ github.workflow }}-${{ github.ref }}

jobs:
  deploy:
    name: Deploy

    # changeset-release/**ã‹ã‚‰ã®PRãŒãƒãƒ¼ã‚¸ã•ã‚Œã¦ã„ã‚Œã°å®Ÿè¡Œã™ã‚‹
    if: github.event.pull_request.merged == true && startsWith(github.head_ref, 'changeset-release')

    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repo
        uses: actions/checkout@v4

      - name: Deploy
        run: npm run deploy # ãƒ‡ãƒ—ãƒ­ã‚¤å‡¦ç†ã¨ã‹
```

`changesets/action@v1`ã®æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã€ãƒªãƒªãƒ¼ã‚¹ç”¨ã®PRã®ä½œæˆã‚‚ãƒ‡ãƒ—ãƒ­ã‚¤ã‚‚ä¸€ã¤ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ã‚„ã‚‹æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ã€‚ãŸã ã€ã€Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹ã¨ãã¯å¿…ãšå¤‰æ›´ãƒ­ã‚°ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹ã€ã¨ã„ã†å‰æãŒã‚ã‚‹ã®ã§æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚

:::details releaseãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ã‚„ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³

`changesets/action@v1`ã®`publish`ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ¸¡ã™ã¨ã€ã€Œå¤‰æ›´ãƒ­ã‚°ãŒä¸€ã¤ã‚‚ãªã„å ´åˆã€ã€å®Ÿè¡Œã—ã¦ãã‚Œã¾ã™ã€‚ãã®ãŸã‚ã€`ã€Œå¤‰æ›´ãƒ­ã‚°ãŒä¸€ã¤ã‚‚ãªã„çŠ¶æ…‹ã€==ãƒ‡ãƒ—ãƒ­ã‚¤å‡¦ç†ã‚’èµ°ã‚‰ã›ã‚‹å¿…è¦ãŒã‚ã‚‹`ã®ã§ã‚ã‚Œã°ã“ã®æ–¹æ³•ã§ã‚ˆã„ã¨æ€ã„ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ã¨ãã¯å¿…ãšå¤‰æ›´ãƒ­ã‚°ã‚’æ®‹ã™ã¨ã„ã†é‹ç”¨ãŒç«‹ã¦ã¤ã„ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

é€†ã«ãã†ã§ãªã„ã®ã§ã‚ã‚Œã°ã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’åˆ†ã‘ã¾ã—ã‚‡ã†ã€‚ä¾‹ãˆã°ã€å¤‰æ›´ãƒ­ã‚°ã‚’`CHANGELOG.md`ã«åãå‡ºã—ãŸã‚ã¨ã¯ã€Œå¤‰æ›´ãƒ­ã‚°ãŒä¸€ã¤ã‚‚ãªã„çŠ¶æ…‹ã€ã«ãªã‚Šã¾ã™ã€‚ã“ã®ã¾ã¾å¤‰æ›´ãƒ­ã‚°ã‚’ä½œæˆã›ãšãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ã¨`publish`ã«æ¸¡ã—ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯å®Ÿè¡Œã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚

```yml:.github/workflows/release.yml
name: Release

on:
  push:
    branches:
      - main

concurrency: ${{ github.workflow }}-${{ github.ref }}

jobs:
  release:
    name: Release

    permissions:
      pull-requests: write
      contents: write

    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repo
        uses: actions/checkout@v4

      - name: Setup Node.js 20
        uses: actions/setup-node@v4
        with:
          node-version: 20

      - name: Install Dependencies
        run: npm install

      - name: Create Release Pull Request
        uses: changesets/action@v1
        with:
          publish: npm run deploy # ãƒ‡ãƒ—ãƒ­ã‚¤å‡¦ç†ã¨ã‹
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```
:::

# ãƒªãƒªãƒ¼ã‚¹ç”¨ã®ãƒ–ãƒ©ãƒ³ãƒãŒåˆ¥ã«ã‚ã‚‹å ´åˆ

Vercelã®ã‚ˆã†ã«è¨­å®šã—ãŸãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚[changesets](https://github.com/changesets/changesets)ãŒç™ºè¡Œã™ã‚‹PRã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ–ãƒ©ãƒ³ãƒã¯å¤‰æ›´ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚`release`ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆã—ã¦ã€ãã‚Œã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ç”¨ã®ãƒ–ãƒ©ãƒ³ãƒã«ã™ã‚‹ã®ãŒãŠã™ã™ã‚ã§ã™ã€‚

`changesets/action@v1`ã®`branch`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã«ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ–ãƒ©ãƒ³ãƒã‚’è¨­å®šã—ã¾ã™ã€‚
ã“ã‚Œã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ãƒ³ãƒï¼ˆ`main`ï¼‰ã‹ã‚‰ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã—ã€`release`ãƒ–ãƒ©ãƒ³ãƒã«å‘ã‘ãŸPRãŒä½œæˆã•ã‚Œã¾ã™ã€‚

:::message
ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ–ãƒ©ãƒ³ãƒã®ä½œæˆã¯ã—ã¦ãã‚Œãªã„ã®ã§ã€äº‹å‰ã«ä½œæˆã—ã¦ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ–ãƒ©ãƒ³ãƒãŒãƒªãƒ¢ãƒ¼ãƒˆã«å­˜åœ¨ã—ãªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚
:::

```yml:.github/workflows/release.yml
name: Release

on:
  push:
    branches:
      - main

concurrency: ${{ github.workflow }}-${{ github.ref }}

jobs:
  release:
    name: Release

    permissions:
      pull-requests: write
      contents: write

    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repo
        uses: actions/checkout@v4

      - name: Setup Node.js 20
        uses: actions/setup-node@v4
        with:
          node-version: 20

      - name: Install Dependencies
        run: npm install

      - name: Create Release Pull Request
        uses: changesets/action@v1
        with:
          branch: release # ã“ã‚Œã‚’è¿½åŠ ã™ã‚‹
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚

https://github.com/108yen/changeset-zenn/pull/5

::::message alert
`changesets/action@v1`ã¯å¿…ãšãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ–ãƒ©ãƒ³ãƒã§å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚ã‚³ãƒŸãƒƒãƒˆã«ç´ã¥ãPRã®å–å¾—ã‚’`associatedPullRequests`ã‚’ä½¿ã£ã¦å–å¾—ã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ–ãƒ©ãƒ³ãƒã«å¯¾ã—ã¦ãƒãƒ¼ã‚¸ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã§ãªã„ã¨æ­£ã—ã„å†…å®¹ã«ãªã‚Šã¾ã›ã‚“ã€‚

:::details `associatedPullRequests`ã§å–å¾—ã—ã¦ã„ã‚‹ç®‡æ‰€

https://github.com/changesets/changesets/blob/7ccb22e302dfc46d18e01f81f7979455960c0db9/packages/get-github-info/src/index.ts#L34-L44

:::

ãƒªãƒ³ã‚¯ã•ã‚Œã‚‹PRãŒãƒã‚°ã‚‹ã®ã¨ã€å¤‰æ›´ã‚’å®Ÿæ–½ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ`github-action`å›ºå®šã«ãªã‚Šã¾ã™ã€‚

![wrong pr](/images/358d9c7201b238/wrong-content.png)

`main`ãƒ–ãƒ©ãƒ³ãƒä»¥å¤–ã®ãƒ–ãƒ©ãƒ³ãƒã§å®Ÿè¡Œã™ã‚‹å ´åˆã¯ã€GitHubã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ãƒ³ãƒã®è¨­å®šã‚‚å¿˜ã‚Œãšã«å¤‰æ›´ã—ã¾ã—ã‚‡ã†ã€‚

::::

# è£œè¶³

## ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹

:::details modifying-changelog-format.md
https://github.com/changesets/changesets/blob/main/docs/modifying-changelog-format.md
:::

[PRã‚’ç´ã¥ã‘ã‚‹](#prã‚’ç´ã¥ã‘ã‚‹)ã§ã‚‚å¤‰æ›´ã—ãŸ`.changeset/config.json`ã®`changelog`ã®é …ç›®ã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒå¯èƒ½ã§ã™ã€‚`.changeset`ãƒ•ã‚©ãƒ«ãƒ€é…ä¸‹ã«`changelog-function.js`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ãã‚Œã‚’`changelog`ã§èª­ã¿è¾¼ã¿ã¾ã™ã€‚

```diff json:.changeset/config.json
  ...
-  "changelog": "@changesets/cli/changelog",
+  "changelog": "./changelog-function.js",
  ...
```

`getReleaseLine`ã®å‡ºåŠ›ãŒãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã®ï¼‘è¡Œã«ãªã‚Šã¾ã™ã€‚`getDependencyReleaseLine`ã¯ãƒ¢ãƒãƒ¬ãƒæ§‹æˆã«ãªã£ã¦ã„ã‚‹ã‚ˆã†ãªå ´åˆã«ã€ä¾å­˜é–¢ä¿‚ãŒè¨˜è¼‰ã•ã‚Œã‚‹ã‚‚ã®ã§ã™ã€‚ï¼ˆWebã§ä½¿ã†ã¨ãã«ã¯ã‚ã¾ã‚Šæ°—ã«ã™ã‚‹å¿…è¦ã¯ãªã„ã¨æ€ã„ã¾ã™ã€‚ï¼‰

:::details ã‚¤ãƒ¡ãƒ¼ã‚¸
`getReleaseLine`ã®æˆ»ã‚Šå€¤ã¨ã—ã¦è¿”ã—ãŸæ–‡å­—åˆ—ãŒã€èµ¤æ ã§å›²ã£ãŸ1è¡Œåˆ†ã«ãªã‚Šã¾ã™ã€‚

![release line image](/images/358d9c7201b238/release-line-sample.png)

`getDependencyReleaseLine`ã®æˆ»ã‚Šå€¤ã¯ã€ä»¥ä¸‹ã®èµ¤æ ã§å›²ã£ãŸéƒ¨åˆ†ã«ãªã‚Šã¾ã™ã€‚

![dependency release line image](/images/358d9c7201b238/yamada-ui-pr-sample.png)

:::

:::details getReleaseLineã®å¼•æ•°

å¼•æ•°ã¯ä»¥ä¸‹è„³ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
```ts
type getReleaseLine(
    changeset: {
        // This is the string of the summary from the changeset markdown file
        summary: string
        // This is an array of information about what is going to be released. each is an object with name: the name of the package, and type, which is "major", "minor", or "patch"
        releases
        // the hash for the commit that introduced the changeset
        commit
    },
    // the type of the change this changeset refers to, as "major", "minor", or "patch"
    type
    // This needs to be explained - see @changesets/changelog-github's code for how this works
    changelogOpts
) => string
```
:::

```js:.changeset/changelog-function.js
async function getReleaseLine(changesets, type, options) {
  return "changelog"
}

async function getDependencyReleaseLine(changesets, dependenciesUpdated,options) {
    return 
}

const changelogFunctions = {
  getReleaseLine,
  getDependencyReleaseLine
}

module.exports = changelogFunctions
```

`@changesets/changelog-github`ã‚‚åŒã˜æ§‹æˆã«ãªã£ã¦ã„ã¾ã™ã€‚

https://github.com/changesets/changesets/blob/main/packages/changelog-github/src/index.ts

### å€¤ã‚’æ¸¡ã™

`options`ã§å—ã‘å–ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šã™ã‚‹ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚ã“ã‚Œã§ã€`options.repo`ã‹ã‚‰`108yen/changeset-zenn`ãŒå–ã‚Œã¾ã™ã€‚

```diff json:.changeset/config.json
  ...
-  "changelog": "@changesets/cli/changelog",
+  "changelog": [
+    "@changesets/changelog-github",
+    { "repo": "108yen/changeset-zenn" }
+  ],
  ...
```

## GitHub ã® release ã‚’ä½œæˆã™ã‚‹

GitHubã®å³å´ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚„ã¤ã§ã™ã€‚

![github release](/images/358d9c7201b238/github-release.png)
https://github.com/108yen/changeset-zenn/releases/tag/v0.2.2

ç‰¹ã«å…¬é–‹ã™ã‚‹ã‚ã‘ã§ã¯ãªã„ã®ã§å¿…é ˆã§ã¯ãªã„ã®ã§ã™ãŒã€è‡ªåˆ†ã¯ä½œæˆã—ãŸã‹ã£ãŸã®ã§è¨­å®šã—ã¦ã„ã¾ã™ã€‚[changesets](https://github.com/changesets/changesets)ã§ã¯GitHubã®ãƒªãƒªãƒ¼ã‚¹ã®ä½œæˆæ©Ÿèƒ½ãŒã€`npm`ã®å…¬é–‹ã®æ©Ÿèƒ½ã¨ç´ã¥ã„ã¦ãŠã‚Šã€ãã‚Œå˜ä½“ã§å‹•ã‹ã›ãªã‹ã£ãŸãŸã‚ã€å°‚ç”¨ã®GitHub Actionã‚’ä½œã£ã¦ã¿ã¾ã—ãŸã€‚ã‚ˆã‘ã‚Œã°ä½¿ã£ã¦ãã ã•ã„ã€‚

:::message
ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€ãƒªãƒªãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ã€`content: write`ã®æ¨©é™ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚
:::

```yml:.github/workflows/deploy.yml
name: Deploy

on:
  pull_request_target:
    types:
      - closed
    branches:
      - release

concurrency: ${{ github.workflow }}-${{ github.ref }}

jobs:
  deploy:
    name: Deploy

    permissions:
      contents: write

    if: github.event.pull_request.merged == true && startsWith(github.head_ref, 'changeset-release')
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Create GitHub Release
        uses: 108yen/changeset-release@v1
        with:
          target: release # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ãƒ³ãƒä»¥å¤–ã«ãƒªãƒªãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹å ´åˆã¯ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ–ãƒ©ãƒ³ãƒã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: Deploy
        run: [ãƒ‡ãƒ—ãƒ­ã‚¤å‡¦ç†ã¨ã‹]
```

è‡ªåˆ†ã§ç®¡ç†ã—ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚³ãƒ”ãƒšã—ã¦ä½¿ã£ã¦ãã ã•ã„ã€‚
ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã¯ãã‚“ãªã«ã‚€ã¤ã‹ã—ããªãã€`package.json`ã®`version`ã¨`CHANGELOG.md`è©²å½“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å†…å®¹ã‚’èª­ã¿ã ã—ã¦ã€ãã‚Œã‚‰ã‚’ã‚‚ã¨ã«GitHubã®ãƒªãƒªãƒ¼ã‚¹ã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚

https://github.com/108yen/changeset-release/tree/main/src

## web ãƒšãƒ¼ã‚¸ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹

[changesets](https://github.com/changesets/changesets)ã¯`package.json`ã®`version`ã‚‚å¤‰æ›´ã—ã¦ãã‚Œã‚‹ã®ã§ã€ã“ã“ã®å€¤ã‚’å–ã‚Šå‡ºã›ã°è‰¯ã„ã§ã™ã€‚[find-packages](https://www.npmjs.com/package/find-packages)ã¨ã„ã†ã®ãŒã‚ã‚‹ã®ã§ã€ä½¿ã†ã¨ä¾¿åˆ©ã§ã™ã€‚

```shell
npm install find-packages
```

Nextjsã®App Routerã§ã‚ã‚Œã°ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦è¡¨ç¤ºã§ãã¾ã™ã€‚
```tsx:page.tsx
import { findPackages } from "find-packages";

export default function Home() {
  const packages = await findPackages("./");
  const {version} = packages[0].manifest;

  return <p>{version}</p>
}
```

## tag ã‚’ç™ºè¡Œã™ã‚‹

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€git tagã‚’ä½œæˆã—ã¦ãã‚Œã¾ã™ã€‚
pushã¯ã—ã¦ãã‚Œãªã„ã®ã§ã€GitHub Actionä¸Šã§ã‚¿ã‚°ã‚’ç™ºè¡Œã™ã‚‹å ´åˆã¯`git push --follow-tags`ã§tagã‚’pushã—ã¦ãã ã•ã„ã€‚
```shell
npx changeset tag
```

# ã¾ã¨ã‚

é•·ããªã‚Šã¾ã—ãŸãŒã€ä½¿ã„ã“ãªã›ã‚‹ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚’ã»ã¨ã‚“ã©è‡ªå‹•åŒ–ã§ãã‚‹ã®ã§ã€ãœã²ä½¿ã£ã¦ã¿ã¦ãã ã•ã„ã€‚monorepoã®ç®¡ç†ã‚„ã€GitHub Actionã®æ©Ÿèƒ½ãªã©ç´¹ä»‹ã—ãã‚Œãªã‹ã£ãŸæ©Ÿèƒ½ã‚‚ã‚ã‚‹ã®ã§ã€èˆˆå‘³ãŒã‚ã‚Œã°èª¿ã¹ã¦ã¿ã¦ãã ã•ã„ï¼