---
title: "changesetsã‚’ä½¿ã£ã¦Webã‚µã‚¤ãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è‡ªå‹•ç®¡ç†ã™ã‚‹"
emoji: "ğŸ‡"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["githubactions", "github", "changesets"]
published: false
---

# ã¯ã˜ã‚ã«

Web ã‚µã‚¤ãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã«[changesets](https://github.com/changesets/changesets)ã‚’å°å…¥ã—ã¦ã¿ã¦ã€ä½¿ãˆã‚‹ã¨çµæ§‹ä¾¿åˆ©ãªã®ã§ã™ãŒã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒã‚ã‹ã‚Šã«ããã€ä½¿ã„æ–¹ã‚„ã¤ã¾ã£ãŸç‚¹ãªã©æ›¸ã„ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚
[changesets](https://github.com/changesets/changesets)ã«ã¯`npm`ã¸ã®å…¬é–‹æ©Ÿèƒ½ãªã©ã‚‚ã‚ã‚Šã€[Chakra UI](https://v2.chakra-ui.com/getting-started)ã‚„[Yamada UI](https://yamada-ui.com/ja/getting-started)ã§ã‚‚ä½¿ã£ã¦ã„ãŸã‚Šã™ã‚‹ã®ã§ã™ãŒã€ä»Šå›ã¯ã“ã®æ©Ÿèƒ½ã«ã¤ã„ã¦ã¯è¨˜è¼‰ã—ã¾ã›ã‚“ã€‚

ã‚ˆãæ¯”è¼ƒã•ã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã§[semantic-release](https://semantic-release.gitbook.io/semantic-release)ã¨ã„ã†ã‚‚ã®ã‚‚ã‚ã‚‹ã®ã§ã™ãŒã€ã“ã¡ã‚‰ã¯ã‚³ãƒŸãƒƒãƒˆã”ã¨ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä¸ŠãŒã£ã¦ã„ãã‚ˆã†ã§ã™ã€‚
è‡ªåˆ†ã¯é©å½“ã«ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã“ã¨ã‚‚å¤šã„ãŸã‚ã€ã‚ˆã‚ŠæŸ”è»Ÿã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æ“ä½œãŒã§ãã‚‹[changesets](https://github.com/changesets/changesets)ã®ã»ã†ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚

# [changesets](https://github.com/changesets/changesets)ã¨ã¯

[changesets](https://github.com/changesets/changesets)ã¯[ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°](https://semver.org/lang/ja/)ã«åŸºã¥ã„ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚’åŠ¹ç‡åŒ–ã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
ã–ã£ãã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚
å‰ã®ç« ã§ã‚‚è¨€åŠã—ã¾ã—ãŸãŒã€å¥½ããªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å¤‰æ›´ã®ãƒ­ã‚°ã‚’æ›¸ãè¾¼ã‚€ã“ã¨ãŒã§ãã€ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã®ä½œæˆãªã©ã‚‚ github action è¨­å®šã™ã‚Œã°è‡ªå‹•ã§ã‚„ã£ã¦ãã‚Œã‚‹ã®ã§ã‚ã£ã¡ã‚ƒä¾¿åˆ©ã§ã™ã€‚

- å¤‰æ›´ãƒ­ã‚°ã®ç®¡ç†
  - ã©ã®ãƒ¬ãƒ™ãƒ«ï¼ˆmajor, minor, patchï¼‰ã®å¤‰æ›´ã«ã™ã‚‹ã‹ã‚‚éƒ½åº¦é¸æŠå¯èƒ½
  - ã‚³ãƒŸãƒƒãƒˆã‚„ PR ã¨ã®ç´ã¥ã‘ã‚‚ã—ã¦ãã‚Œã‚‹

- ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã®è‡ªå‹•ä½œæˆ
  - ã‚³ãƒãƒ³ãƒ‰ã§ã®ä½œæˆã‚‚å¯èƒ½
  - GitHub Action ã‚‚ã‚ã‚Šã€ãƒªãƒªãƒ¼ã‚¹ã® PR ã‚’è‡ªå‹•ã§ã¤ãã£ã¦ãã‚Œã‚‹

ã“ã‚“ãªæ„Ÿã˜ã§ä½œã£ã¦ãã‚Œã¾ã™ã€‚
![pr sample](/images/358d9c7201b238/pr-sample.png)

# æº–å‚™

å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã“ã¡ã‚‰ã«ãªã‚Šã¾ã™ã€‚

:::details intro-to-using-changesets.md
https://github.com/changesets/changesets/blob/main/docs/intro-to-using-changesets.md
:::

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨åˆæœŸåŒ–

cli ãƒ„ãƒ¼ãƒ«ã¯`@changesets/cli`ã«å…¥ã£ã¦ã„ã‚‹ã®ã§ã€ã“ã‚Œã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã ã¨ãã®ã¾ã¾ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã¾ã™ãŒã€`devDependencies`ã®æ–¹ã«å…¥ã‚Œã‚Œã°ã„ã„ã¨æ€ã„ã¾ã™ã€‚

```shell
npm install --save-dev @changesets/cli
```

cli ãƒ„ãƒ¼ãƒ«ã‚’å…¥ã‚ŒãŸã‚‰ã€ã¾ãšåˆæœŸåŒ–ã—ã¾ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã«`.changeset`ãƒ•ã‚©ãƒ«ãƒ€ãŒä½œæˆã•ã‚Œã¾ã™ã€‚

```shell
npx changeset init
```

## `package.json`ã®è¨­å®š

:::details versioning-apps.md
https://github.com/changesets/changesets/blob/main/docs/versioning-apps.md
:::

[changesets](https://github.com/changesets/changesets)ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã™ã‚‹ãŸã‚ã«`package.json`å†…ã«æœ€ä½é™ã€ä»¥ä¸‹ã®3é …ç›®ãŒå«ã¾ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚é€†ã«ã€ã“ã®3é …ç›®ãŒå«ã¾ã‚Œã‚‹`package.json`ã•ãˆä½œæˆã™ã‚Œã°ã€ã©ã‚“ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†å¯èƒ½ãªã‚ˆã†ã§ã™ã€‚

```json
{
  "name": "package",
  "version": "1.0.0",
  "private": true
}
```

`name`ã«ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã‚’æŒ‡å®šã—ã¾ã™ã€‚[changesets](https://github.com/changesets/changesets)ã¯`version`ã®å€¤ã‚’å…ƒã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚ã’ã¦ã„ãã¾ã™ã€‚
`o.o.o`ã‹ã‚‰å§‹ã‚ãŸã„å ´åˆã¯ã€ã“ã“ã‚’æ›¸ãæ›ãˆã‚‹ã¨ãã“ã‹ã‚‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¸Šã’ã‚Œã¾ã™ã€‚
`private`ã¯`false`ã®å ´åˆã€`npm`ãªã©ã«å…¬é–‹ã™ã‚‹ãŸã‚ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒèµ°ã‚Šã¾ã™ã€‚ä»Šå›ã¯å…¬é–‹ã—ãªã„ã®ã§ã€`true`ã«ã—ã¾ã™ã€‚

## `config.json`ã®è¨­å®š

`npx changeset init`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€`.changeset/config.json`ãŒä½œæˆã•ã‚Œã¾ã™ã€‚
ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å…¬é–‹ã—ãªã„å ´åˆã¯ã€ä»¥ä¸‹ã®è¨­å®šã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```json:.changeset/config.json
{
  ...
  "privatePackages": {
    "version": true,
    "tag": true
  }
}
```

# ä½¿ã„æ–¹

[changesets](https://github.com/changesets/changesets)ã®ã‚³ãƒãƒ³ãƒ‰ã§ã€å¤‰æ›´ã®è¨˜éŒ²ãŒè¨˜è¼‰ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã€ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã‚ã¦ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒŸãƒƒãƒˆãŠã‚ˆã³ãã‚ŒãŒå«ã¾ã‚Œã‚‹PRã¨åˆã‚ã›ã¦ç®¡ç†ã§ãã¾ã™ã€‚
è¨˜éŒ²ã•ã‚ŒãŸå¤‰æ›´ã‚’å…ƒã«ã€`CHANGELOG.md`ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’åãå‡ºã™ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

## å¤‰æ›´ã‚’è¨˜éŒ²ã™ã‚‹

å¤‰æ›´ã‚’æ›¸ãè¾¼ã‚€å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```shell
npx changeset
```

å®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã©ã®ãƒ¬ãƒ™ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³å¤‰æ›´ã‚’ã—ãŸã®ã‹èã‹ã‚Œã¾ã™ã€‚

```shell
ğŸ¦‹  What kind of change is this for changeset-zenn? (current version is 0.1.0) â€¦
â¯ patch
  minor
  major
```

é¸æŠã™ã‚‹ã¨ã€å¤‰æ›´å†…å®¹ã‚’èã‹ã‚Œã‚‹ã®ã§ã€å…¥åŠ›ã—ã¾ã™ã€‚

```shell
ğŸ¦‹  What kind of change is this for changeset-zenn? (current version is 0.1.0) Â· patch
ğŸ¦‹  Please enter a summary for this change (this will be in the changelogs).
ğŸ¦‹    (submit empty line to open external editor)
ğŸ¦‹  Summary â€º
```

å…¥åŠ›ã—ã¦`Enter`ã‚’æŠ¼ä¸‹ã™ã‚‹ã¨ã€ã“ã‚Œã§ã„ã„ã§ã™ã‹ï¼Ÿã¨èã‹ã‚Œã‚‹ã®ã§å†åº¦`Enter`ã‚’æŠ¼ä¸‹ã—ã¦ã€å¤‰æ›´ã®è¨˜éŒ²ãŒè¨˜è¼‰ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ç”Ÿæˆã¯å®Œäº†ã«ãªã‚Šã¾ã™ã€‚

```shell
ğŸ¦‹  === Summary of changesets ===
ğŸ¦‹  patch:  changeset-zenn
ğŸ¦‹
ğŸ¦‹  Is this your desired changeset? (Y/n) â€º true
```

å®Œäº†ã™ã‚‹ã¨ã€`.changeset`ãƒ•ã‚©ãƒ«ãƒ€é…ä¸‹ã«å…ˆã»ã©ã®å¤‰æ›´ãŒè¨˜éŒ²ã•ã‚ŒãŸmdãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã™ã€‚å¤‰æ›´ã®è¨˜éŒ²ã‚’è¿½åŠ ã™ã‚‹ãŸã³ã«ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¢—ãˆã¦ã„ãã¾ã™ã€‚
mdãƒ•ã‚¡ã‚¤ãƒ«ãªã®ã§ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³å¤‰æ›´ã®ãƒ¬ãƒ™ãƒ«ã®å¤‰æ›´ã‚„ã€å¤‰æ›´å†…å®¹ã®æ–‡ç« ã‚’æ›´æ–°ã—ãŸã„å ´åˆã¯ç›´æ¥å¤‰æ›´å¯èƒ½ã§ã™ã€‚
ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒŸãƒƒãƒˆã«å«ã‚ã€å¤‰æ›´ã®è¨˜éŒ²ã¯å®Œäº†ã«ãªã‚Šã¾ã™ã€‚

![changeset folder](/images/358d9c7201b238/changeset-folder.png)

## ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—

ãƒªãƒªãƒ¼ã‚¹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã€æºœã¾ã£ãŸå¤‰æ›´ã®è¨˜éŒ²ã‚’å…ƒã«`CHANGELOG.md`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```shell
npx changeset version
```

å®Ÿè¡Œã™ã‚‹ã¨ã€ä»Šã¾ã§æºœã¾ã£ã¦ã„ãŸ`.changeset`é…ä¸‹ã®mdãƒ•ã‚¡ã‚¤ãƒ«ãŒå‰Šé™¤ã•ã‚Œã€`CHANGELOG.md`ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ›´æ–°ã•ã‚Œã¾ã™ã€‚
ä»Šå›ã¯`Minor`ã®å¤‰æ›´ã¨`Patch`ã®å¤‰æ›´äºŒã¤å®Ÿæ–½ã—ãŸã®ã§ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯`0.1.0`ã€€â†’ `0.2.0`ã«å¤‰æ›´ã«ãªã‚Šã¾ã—ãŸã€‚
`package.json`ãªã„ã®`version`ã®é …ç›®ã‚‚ä¸€ç·’ã«å¤‰æ›´ã•ã‚Œã¾ã™ã€‚

```md:CHANGELOG.md
# changeset-zenn

## 0.2.0

### Minor Changes

- 8ccbd1d: Test changelog3.

### Patch Changes

- 0903189: Test changelog2.
- 52036f3: Test changelog.
```

## GitHub Action

[changesets](https://github.com/changesets/changesets)ãŒã€[Github Action](https://github.com/changesets/action)ã‚‚ç”¨æ„ã—ã¦ãã‚Œã¦ãŠã‚Šã€ä¾¿åˆ©ã™ãã‚‹ã®ã§[changesets](https://github.com/changesets/changesets)ã‚’ä½¿ã†ã®ã§ã‚ã‚Œã°ã€çµ¶å¯¾ä½¿ã†ã¹ãã§ã™ã€‚
`npx changeset version`ã‚’å®Ÿè¡Œã—ã€ãã®å¤‰æ›´ã‚’å«ã‚ã‚³ãƒŸãƒƒãƒˆã—ãŸä¸Šã§ã€PRã‚’è‡ªå‹•ã§ä½œæˆã—ã¦ãã‚Œã¾ã™ã€‚è¿½åŠ ã®å¤‰æ›´ã‚’ã—ãŸå ´åˆã¯ã€ãã‚Œã‚‚å–ã‚Šè¾¼ã‚“ã§æ—¢å­˜ã®PRã‚’ä¸Šæ›¸ãã—ã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§`main`ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹ã”ã¨ã«ã€å¤‰æ›´ãŒè¨˜éŒ²ã•ã‚ŒãŸmdãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã—ã€ã‚ã‚Œã°ãã‚Œã‚’PRã«åæ˜ ã—ã¦ãã‚Œã¾ã™ã€‚
ã‚³ãƒŸãƒƒãƒˆã¨PRã®ä½œæˆã‚’è¡Œã†ã®ã§ã€ãã®æ¨©é™ã‚’`permissions`ã§ä»˜ä¸ã—ã¦ãã ã•ã„ã€‚
GitHubãƒªãƒã‚¸ãƒˆãƒªã®è¨­å®šã‚‚å¤‰æ›´ãŒå¿…è¦ã§ã™ã€‚

:::details ãƒªãƒã‚¸ãƒˆãƒªã®è¨­å®šå¤‰æ›´

Settingsã€€â†’ Actions â†’ General â†’ Workflow permissionsã®`Allow GitHub Actions to create and approve pull requests`ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚
èª¬æ˜ã«è¨˜è¼‰ã®é€šã‚Šã€GitHub Actionsã«PRã®ä½œæˆã‚’è¨±å¯ã™ã‚‹è¨­å®šã«ãªã‚Šã¾ã™ã€‚

![github setting](/images/358d9c7201b238/github-setting.png)

:::

```yml:.github/workflows/release.yml
name: Release

on:
  push:
    branches:
      - main

concurrency: ${{ github.workflow }}-${{ github.ref }}

jobs:
  release:
    name: Release

    permissions:
      pull-requests: write
      contents: write

    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repo
        uses: actions/checkout@v3

      - name: Setup Node.js 20
        uses: actions/setup-node@v3
        with:
          node-version: 20

      - name: Install Dependencies
        run: npm install

      - name: Create Release Pull Request
        uses: changesets/action@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

ã“ã†ã„ã†æ„Ÿã˜ã®PRã‚’ä½œæˆã—ã¦ãã‚Œã¾ã™ã€‚
ãƒªãƒªãƒ¼ã‚¹ã®æ™‚ã¯ã“ã®PRã‚’ãƒãƒ¼ã‚¸ã™ã‚‹ã ã‘ã§è‰¯ããªã‚Šã€æ‰‹å‹•ã§`npx changeset version`ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ã¯ãªããªã‚Šã¾ã™ã€‚

https://github.com/108yen/changeset-zenn/pull/1


# ãŠã™ã™ã‚ã®ä½¿ã„æ–¹


## GitHub Actionã®è¨­å®š



## GitHub ã® release ã‚’ä½œæˆã™ã‚‹

## web ãƒšãƒ¼ã‚¸ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹

# è£œè¶³

# ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹

:::details modifying-changelog-format.md
https://github.com/changesets/changesets/blob/main/docs/modifying-changelog-format.md
:::

# ãƒ–ãƒ©ãƒ³ãƒã®é‹ç”¨ã‚’è€ƒãˆã‚‹

## base branch ã®è¨­å®šã«æ°—ã‚’ä»˜ã‘ã‚‹

## tag ã‚’ç™ºè¡Œã™ã‚‹
